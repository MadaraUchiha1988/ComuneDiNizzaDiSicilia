










<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guida Turistica Locale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f8f9fa;
        }
        .category-card:hover, .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .place-card:hover, .offer-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        .tab-active {
            color: #2563eb;
            border-bottom: 2px solid #2563eb;
        }
        .rating-star {
            cursor: pointer;
        }
        .rating-star:hover ~ .rating-star,
        .rating-star:hover {
            color: #fbbf24;
        }
    </style>
</head>
<body>
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-gradient-to-r from-blue-600 to-blue-800 text-white shadow-md">
            <div class="container mx-auto px-4 py-6">
                <div class="flex justify-between items-center">
                    <div class="flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <h1 class="text-2xl font-bold" id="cityName">Guida Turistica</h1>
                    </div>
                    <div class="flex items-center">
                        <button id="notificationBtn" class="bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full p-2 transition duration-300 mr-2 relative">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                            </svg>
                            <span class="absolute top-0 right-0 bg-red-500 text-xs rounded-full h-4 w-4 flex items-center justify-center">3</span>
                        </button>
                        <button id="settingsBtn" class="bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full p-2 transition duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="mt-6 relative">
                    <input type="text" id="searchInput" placeholder="Cerca negozi, servizi, luoghi..." class="w-full py-3 px-4 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-400 text-gray-700">
                    <button id="searchBtn" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow container mx-auto px-4 py-6">
            <!-- Tabs -->
            <div class="mb-6 border-b border-gray-200">
                <div class="flex overflow-x-auto whitespace-nowrap">
                    <button class="tab-btn tab-active px-4 py-2 font-medium text-sm" data-tab="home">Home</button>
                    <button class="tab-btn px-4 py-2 font-medium text-sm text-gray-600" data-tab="events">Eventi</button>
                    <button class="tab-btn px-4 py-2 font-medium text-sm text-gray-600" data-tab="offers">Offerte</button>
                    <button class="tab-btn px-4 py-2 font-medium text-sm text-gray-600" data-tab="itineraries">Itinerari</button>
                    <button class="tab-btn px-4 py-2 font-medium text-sm text-gray-600" data-tab="weather">Meteo</button>
                </div>
            </div>

            <!-- Tab Content -->
            <div id="tabContent">
                <!-- Home Tab (Default) -->
                <div id="homeTab" class="tab-content">
                    <!-- Categories -->
                    <section class="mb-8">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Categorie</h2>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="category-card bg-white rounded-lg shadow-md p-4 flex flex-col items-center cursor-pointer transition duration-300" data-category="ristoranti">
                                <div class="bg-red-100 p-3 rounded-full mb-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                                    </svg>
                                </div>
                                <span class="text-gray-700 font-medium">Ristoranti</span>
                            </div>
                            <div class="category-card bg-white rounded-lg shadow-md p-4 flex flex-col items-center cursor-pointer transition duration-300" data-category="negozi">
                                <div class="bg-blue-100 p-3 rounded-full mb-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                                    </svg>
                                </div>
                                <span class="text-gray-700 font-medium">Negozi</span>
                            </div>
                            <div class="category-card bg-white rounded-lg shadow-md p-4 flex flex-col items-center cursor-pointer transition duration-300" data-category="servizi">
                                <div class="bg-green-100 p-3 rounded-full mb-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                                    </svg>
                                </div>
                                <span class="text-gray-700 font-medium">Servizi</span>
                            </div>
                            <div class="category-card bg-white rounded-lg shadow-md p-4 flex flex-col items-center cursor-pointer transition duration-300" data-category="attrazioni">
                                <div class="bg-yellow-100 p-3 rounded-full mb-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                                    </svg>
                                </div>
                                <span class="text-gray-700 font-medium">Attrazioni</span>
                            </div>
                        </div>
                    </section>

                    <!-- Featured Places -->
                    <section class="mb-8">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-gray-800" id="featuredTitle">In evidenza</h2>
                            <button id="viewAllBtn" class="text-blue-600 hover:text-blue-800 font-medium">Vedi tutti</button>
                        </div>
                        <div id="placesList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Places will be populated here -->
                        </div>
                    </section>

                    <!-- Map Section -->
                    <section class="mb-8">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Mappa</h2>
                        <div class="bg-white rounded-lg shadow-md overflow-hidden">
                            <div id="map" class="h-64 bg-gray-200 flex items-center justify-center">
                                <div class="text-center p-4">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                                    </svg>
                                    <p class="text-gray-600">Mappa interattiva del comune</p>
                                    <button id="loadMapBtn" class="mt-2 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-300">
                                        Carica mappa
                                    </button>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Events Tab -->
                <div id="eventsTab" class="tab-content hidden">
                    <section class="mb-8">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-gray-800">Eventi in programma</h2>
                            <div class="flex items-center">
                                <button id="calendarViewBtn" class="flex items-center text-blue-600 hover:text-blue-800 font-medium mr-4">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                    Calendario
                                </button>
                                <select id="eventFilter" class="bg-white border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="all">Tutti gli eventi</option>
                                    <option value="today">Oggi</option>
                                    <option value="week">Questa settimana</option>
                                    <option value="month">Questo mese</option>
                                </select>
                            </div>
                        </div>
                        <div id="eventsList" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Events will be populated here -->
                        </div>
                    </section>
                </div>

                <!-- Offers Tab -->
                <div id="offersTab" class="tab-content hidden">
                    <section class="mb-8">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-gray-800">Offerte speciali</h2>
                            <select id="offerFilter" class="bg-white border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="all">Tutte le offerte</option>
                                <option value="ristoranti">Ristoranti</option>
                                <option value="negozi">Negozi</option>
                                <option value="attrazioni">Attrazioni</option>
                            </select>
                        </div>
                        <div id="offersList" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Offers will be populated here -->
                        </div>
                    </section>
                </div>

                <!-- Itineraries Tab -->
                <div id="itinerariesTab" class="tab-content hidden">
                    <section class="mb-8">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold text-gray-800">Itinerari consigliati</h2>
                            <button id="createItineraryBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-1 px-3 rounded-md text-sm transition duration-300">
                                Crea itinerario
                            </button>
                        </div>
                        <div id="itinerariesList" class="grid grid-cols-1 gap-4">
                            <!-- Itineraries will be populated here -->
                        </div>
                    </section>
                </div>

                <!-- Weather Tab -->
                <div id="weatherTab" class="tab-content hidden">
                    <section class="mb-8">
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Previsioni meteo</h2>
                        <div class="bg-white rounded-lg shadow-md overflow-hidden">
                            <div id="weatherWidget" class="p-4">
                                <div class="flex flex-col md:flex-row items-center">
                                    <div class="flex-1 text-center md:text-left mb-4 md:mb-0">
                                        <h3 class="text-2xl font-bold text-gray-800" id="weatherCity">Caricamento...</h3>
                                        <div class="flex items-center justify-center md:justify-start mt-2">
                                            <span class="text-4xl font-bold text-gray-800" id="weatherTemp">--°C</span>
                                            <span class="ml-2 text-gray-600" id="weatherDesc">--</span>
                                        </div>
                                        <div class="mt-2 text-gray-600">
                                            <span id="weatherHumidity">Umidità: --%</span> | 
                                            <span id="weatherWind">Vento: -- km/h</span>
                                        </div>
                                    </div>
                                    <div class="flex-1">
                                        <div id="weatherIcon" class="flex justify-center md:justify-end">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-6 border-t border-gray-200 pt-4">
                                    <h4 class="font-medium text-gray-700 mb-3">Previsioni prossimi giorni</h4>
                                    <div class="grid grid-cols-3 md:grid-cols-5 gap-2" id="forecastContainer">
                                        <!-- Forecast will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </main>

        <!-- Navigation Bar -->
        <nav class="bg-white shadow-lg border-t border-gray-200">
            <div class="container mx-auto px-4">
                <div class="flex justify-around">
                    <button class="nav-btn flex flex-col items-center py-3 px-4 text-blue-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                        </svg>
                        <span class="text-xs mt-1">Home</span>
                    </button>
                    <button class="nav-btn flex flex-col items-center py-3 px-4 text-gray-500 hover:text-blue-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span class="text-xs mt-1">Eventi</span>
                    </button>
                    <button class="nav-btn flex flex-col items-center py-3 px-4 text-gray-500 hover:text-blue-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
                        </svg>
                        <span class="text-xs mt-1">Mappa</span>
                    </button>
                    <button class="nav-btn flex flex-col items-center py-3 px-4 text-gray-500 hover:text-blue-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        <span class="text-xs mt-1">Profilo</span>
                    </button>
                </div>
            </div>
        </nav>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-xl w-11/12 max-w-md mx-auto">
            <div class="flex justify-between items-center border-b border-gray-200 px-6 py-4">
                <h3 class="text-lg font-semibold text-gray-800">Impostazioni</h3>
                <button id="closeSettingsBtn" class="text-gray-400 hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="px-6 py-4">
                <div class="mb-4">
                    <label for="cityInput" class="block text-gray-700 font-medium mb-2">Il tuo comune</label>
                    <input type="text" id="cityInput" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Inserisci il nome del tuo comune">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Tema</label>
                    <div class="flex space-x-4">
                        <button class="theme-btn bg-blue-600 h-8 w-8 rounded-full border-2 border-white shadow-sm" data-theme="blue"></button>
                        <button class="theme-btn bg-green-600 h-8 w-8 rounded-full" data-theme="green"></button>
                        <button class="theme-btn bg-purple-600 h-8 w-8 rounded-full" data-theme="purple"></button>
                        <button class="theme-btn bg-red-600 h-8 w-8 rounded-full" data-theme="red"></button>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Notifiche</label>
                    <div class="flex items-center">
                        <input type="checkbox" id="notificationsToggle" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                        <label for="notificationsToggle" class="ml-2 block text-gray-700">Attiva notifiche</label>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Lingua</label>
                    <select id="languageSelect" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="it">Italiano</option>
                        <option value="en">English</option>
                        <option value="fr">Français</option>
                        <option value="de">Deutsch</option>
                        <option value="es">Español</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Raggio di ricerca</label>
                    <div class="flex items-center">
                        <input type="range" id="radiusRange" min="1" max="50" value="10" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        <span id="radiusValue" class="ml-2 text-gray-700 min-w-[40px] text-center">10 km</span>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-200 px-6 py-4">
                <button id="saveSettingsBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-300">
                    Salva impostazioni
                </button>
            </div>
        </div>
    </div>

    <!-- Place Detail Modal -->
    <div id="placeDetailModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-xl w-11/12 max-w-md mx-auto max-h-[90vh] overflow-y-auto">
            <div id="placeDetailContent">
                <!-- Content will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div id="notificationModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-xl w-11/12 max-w-md mx-auto">
            <div class="flex justify-between items-center border-b border-gray-200 px-6 py-4">
                <h3 class="text-lg font-semibold text-gray-800">Notifiche</h3>
                <button id="closeNotificationBtn" class="text-gray-400 hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="px-6 py-4 max-h-[60vh] overflow-y-auto">
                <div class="space-y-4">
                    <div class="flex items-start p-3 bg-blue-50 rounded-lg">
                        <div class="bg-blue-100 p-2 rounded-full mr-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-medium text-gray-800">Nuovo evento: Festival del Gusto</h4>
                            <p class="text-sm text-gray-600">Questo weekend in Piazza Centrale. Non perdere degustazioni e spettacoli!</p>
                            <p class="text-xs text-gray-500 mt-1">2 ore fa</p>
                        </div>
                    </div>
                    <div class="flex items-start p-3 bg-green-50 rounded-lg">
                        <div class="bg-green-100 p-2 rounded-full mr-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-medium text-gray-800">Offerta speciale: Ristorante Da Mario</h4>
                            <p class="text-sm text-gray-600">Sconto del 20% su menu degustazione per i prossimi 3 giorni!</p>
                            <p class="text-xs text-gray-500 mt-1">Ieri</p>
                        </div>
                    </div>
                    <div class="flex items-start p-3 bg-yellow-50 rounded-lg">
                        <div class="bg-yellow-100 p-2 rounded-full mr-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-medium text-gray-800">Aggiornamento app</h4>
                            <p class="text-sm text-gray-600">Nuove funzionalità disponibili! Scopri gli itinerari personalizzati.</p>
                            <p class="text-xs text-gray-500 mt-1">2 giorni fa</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-200 px-6 py-4">
                <button id="clearNotificationsBtn" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-md transition duration-300">
                    Segna tutte come lette
                </button>
            </div>
        </div>
    </div>

    <!-- Add Review Modal -->
    <div id="reviewModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-xl w-11/12 max-w-md mx-auto">
            <div class="flex justify-between items-center border-b border-gray-200 px-6 py-4">
                <h3 class="text-lg font-semibold text-gray-800">Scrivi una recensione</h3>
                <button id="closeReviewBtn" class="text-gray-400 hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="px-6 py-4">
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Valutazione</label>
                    <div class="flex space-x-1" id="ratingStars">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 rating-star text-gray-400" viewBox="0 0 20 20" fill="currentColor" data-value="1">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 rating-star text-gray-400" viewBox="0 0 20 20" fill="currentColor" data-value="2">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 rating-star text-gray-400" viewBox="0 0 20 20" fill="currentColor" data-value="3">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 rating-star text-gray-400" viewBox="0 0 20 20" fill="currentColor" data-value="4">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 rating-star text-gray-400" viewBox="0 0 20 20" fill="currentColor" data-value="5">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                    </div>
                </div>
                <div class="mb-4">
                    <label for="reviewTitle" class="block text-gray-700 font-medium mb-2">Titolo</label>
                    <input type="text" id="reviewTitle" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Riassumi la tua esperienza">
                </div>
                <div class="mb-4">
                    <label for="reviewText" class="block text-gray-700 font-medium mb-2">Recensione</label>
                    <textarea id="reviewText" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Condividi la tua esperienza..."></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Aggiungi foto</label>
                    <div class="flex items-center justify-center border-2 border-dashed border-gray-300 rounded-md p-4 hover:bg-gray-50 cursor-pointer">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span class="ml-2 text-gray-600">Carica foto</span>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-200 px-6 py-4">
                <button id="submitReviewBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-300">
                    Pubblica recensione
                </button>
            </div>
        </div>
    </div>

    <!-- Create Itinerary Modal -->
    <div id="createItineraryModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-xl w-11/12 max-w-md mx-auto max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center border-b border-gray-200 px-6 py-4">
                <h3 class="text-lg font-semibold text-gray-800">Crea itinerario</h3>
                <button id="closeItineraryBtn" class="text-gray-400 hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="px-6 py-4">
                <div class="mb-4">
                    <label for="itineraryName" class="block text-gray-700 font-medium mb-2">Nome itinerario</label>
                    <input type="text" id="itineraryName" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Es. Giro culturale del centro">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Durata</label>
                    <div class="flex space-x-2">
                        <button class="duration-btn flex-1 py-2 border border-gray-300 rounded-md text-center text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-blue-50 focus:text-blue-600" data-duration="2">2 ore</button>
                        <button class="duration-btn flex-1 py-2 border border-gray-300 rounded-md text-center text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-blue-50 focus:text-blue-600" data-duration="4">Mezza giornata</button>
                        <button class="duration-btn flex-1 py-2 border border-gray-300 rounded-md text-center text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-blue-50 focus:text-blue-600" data-duration="8">Giornata intera</button>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Interessi</label>
                    <div class="grid grid-cols-2 gap-2">
                        <div class="flex items-center">
                            <input type="checkbox" id="interest1" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="interest1" class="ml-2 block text-gray-700">Arte e cultura</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="interest2" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="interest2" class="ml-2 block text-gray-700">Gastronomia</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="interest3" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="interest3" class="ml-2 block text-gray-700">Shopping</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="interest4" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="interest4" class="ml-2 block text-gray-700">Natura</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="interest5" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="interest5" class="ml-2 block text-gray-700">Storia</label>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="interest6" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="interest6" class="ml-2 block text-gray-700">Divertimento</label>
                        </div>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Punto di partenza</label>
                    <input type="text" id="startPoint" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Es. Piazza Centrale">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Note aggiuntive</label>
                    <textarea id="itineraryNotes" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Eventuali preferenze o note..."></textarea>
                </div>
            </div>
            <div class="border-t border-gray-200 px-6 py-4">
                <button id="generateItineraryBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition duration-300">
                    Genera itinerario
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample data
        const places = {
            ristoranti: [
                { id: 1, name: "Trattoria da Mario", category: "ristoranti", rating: 4.7, address: "Via Roma 123", phone: "123-456-7890", description: "Autentica cucina italiana in un ambiente accogliente e familiare.", image: "restaurant", hours: "12:00 - 22:00", price: "€€", reviews: [
                    { author: "Marco B.", rating: 5, title: "Ottimo cibo!", text: "Piatti deliziosi e personale cordiale. Tornerò sicuramente!", date: "2 settimane fa" },
                    { author: "Laura M.", rating: 4, title: "Buona esperienza", text: "Cibo buono e atmosfera piacevole. Prezzi nella media.", date: "1 mese fa" }
                ] },
                { id: 2, name: "Pizzeria Napoli", category: "ristoranti", rating: 4.5, address: "Via Garibaldi 45", phone: "123-456-7891", description: "Le migliori pizze napoletane cotte in forno a legna.", image: "pizza", hours: "18:00 - 23:00", price: "€", reviews: [
                    { author: "Giulia R.", rating: 5, title: "Pizza fantastica!", text: "La migliore pizza napoletana che abbia mai mangiato in città!", date: "3 giorni fa" }
                ] },
                { id: 3, name: "Sushi Bar Yoshi", category: "ristoranti", rating: 4.3, address: "Piazza Dante 7", phone: "123-456-7892", description: "Sushi fresco e cucina giapponese di qualità.", image: "sushi", hours: "12:00 - 14:30, 19:00 - 23:00", price: "€€€", reviews: [] }
            ],
            negozi: [
                { id: 4, name: "Boutique Eleganza", category: "negozi", rating: 4.2, address: "Corso Italia 56", phone: "123-456-7893", description: "Abbigliamento di alta moda e accessori esclusivi.", image: "clothing", hours: "09:30 - 19:30", price: "€€€", reviews: [] },
                { id: 5, name: "Libreria Il Sapere", category: "negozi", rating: 4.6, address: "Via Manzoni 12", phone: "123-456-7894", description: "Vasta selezione di libri, eventi letterari e area caffè.", image: "books", hours: "09:00 - 20:00", price: "€€", reviews: [
                    { author: "Paolo V.", rating: 5, title: "Paradiso per lettori", text: "Ottima selezione di libri e personale molto preparato. L'area caffè è un plus!", date: "1 settimana fa" }
                ] },
                { id: 6, name: "Alimentari Del Gusto", category: "negozi", rating: 4.8, address: "Via Verdi 34", phone: "123-456-7895", description: "Prodotti tipici locali, salumi, formaggi e specialità gastronomiche.", image: "grocery", hours: "08:00 - 19:30", price: "€€", reviews: [] }
            ],
            servizi: [
                { id: 7, name: "Farmacia Centrale", category: "servizi", rating: 4.4, address: "Piazza Municipio 3", phone: "123-456-7896", description: "Farmacia con ampio assortimento e servizio di consulenza.", image: "pharmacy", hours: "08:30 - 19:30", price: "-", reviews: [] },
                { id: 8, name: "Ufficio Postale", category: "servizi", rating: 3.9, address: "Via Cavour 78", phone: "123-456-7897", description: "Servizi postali, finanziari e assicurativi.", image: "post", hours: "08:30 - 13:30", price: "-", reviews: [] },
                { id: 9, name: "Banca Popolare", category: "servizi", rating: 4.0, address: "Corso Vittorio Emanuele 45", phone: "123-456-7898", description: "Servizi bancari completi e consulenza finanziaria.", image: "bank", hours: "08:30 - 13:30, 14:30 - 16:00", price: "-", reviews: [] }
            ],
            attrazioni: [
                { id: 10, name: "Museo Civico", category: "attrazioni", rating: 4.7, address: "Via Museo 1", phone: "123-456-7899", description: "Collezione di arte e reperti storici locali con mostre temporanee.", image: "museum", hours: "10:00 - 18:00", price: "€", reviews: [
                    { author: "Chiara D.", rating: 5, title: "Visita interessante", text: "Mostra ben curata e personale molto disponibile a fornire informazioni.", date: "2 mesi fa" }
                ] },
                { id: 11, name: "Parco Comunale", category: "attrazioni", rating: 4.9, address: "Viale dei Tigli", phone: "123-456-7900", description: "Ampio parco con aree gioco, percorsi fitness e laghetto.", image: "park", hours: "Sempre aperto", price: "Gratuito", reviews: [] },
                { id: 12, name: "Teatro Comunale", category: "attrazioni", rating: 4.6, address: "Piazza Teatro 5", phone: "123-456-7901", description: "Spettacoli teatrali, concerti e eventi culturali.", image: "theater", hours: "Variabile in base agli spettacoli", price: "€€", reviews: [] }
            ]
        };

        // Sample events data
        const events = [
            { id: 1, name: "Festival del Gusto", category: "food", date: "15-17 Luglio", time: "10:00 - 23:00", location: "Piazza Centrale", description: "Tre giorni dedicati alle specialità gastronomiche locali con chef stellati e degustazioni.", image: "food" },
            { id: 2, name: "Concerto in Piazza", category: "music", date: "22 Luglio", time: "21:00", location: "Piazza del Duomo", description: "Concerto all'aperto con l'orchestra sinfonica cittadina.", image: "music" },
            { id: 3, name: "Mostra d'Arte Contemporanea", category: "art", date: "1-30 Agosto", time: "10:00 - 18:00", location: "Museo Civico", description: "Esposizione di opere di artisti contemporanei locali e internazionali.", image: "art" },
            { id: 4, name: "Mercatino dell'Antiquariato", category: "market", date: "Prima domenica del mese", time: "09:00 - 19:00", location: "Centro Storico", description: "Bancarelle di antiquariato, vintage e artigianato locale.", image: "market" }
        ];

        // Sample offers data
        const offers = [
            { id: 1, name: "Sconto 20% Trattoria da Mario", placeId: 1, category: "ristoranti", discount: "20%", validUntil: "31 Luglio", description: "Sconto del 20% sul menu degustazione, valido da lunedì a giovedì.", code: "ESTATE20" },
            { id: 2, name: "2x1 Museo Civico", placeId: 10, category: "attrazioni", discount: "2x1", validUntil: "15 Agosto", description: "Due ingressi al prezzo di uno ogni weekend di luglio e agosto.", code: "MUSEO2X1" },
            { id: 3, name: "Sconto 15% Libreria Il Sapere", placeId: 5, category: "negozi", discount: "15%", validUntil: "31 Agosto", description: "Sconto del 15% su tutti i libri di narrativa.", code: "LIBRI15" }
        ];

        // Sample itineraries data
        const itineraries = [
            { id: 1, name: "Tour del Centro Storico", duration: "3 ore", stops: ["Museo Civico", "Piazza Centrale", "Libreria Il Sapere", "Trattoria da Mario"], description: "Un percorso alla scoperta del centro storico, tra cultura, shopping e buon cibo." },
            { id: 2, name: "Giornata all'Aria Aperta", duration: "6 ore", stops: ["Parco Comunale", "Alimentari Del Gusto", "Pizzeria Napoli"], description: "Una giornata rilassante nel verde, con picnic e attività all'aperto." }
        ];

        // Sample weather data
        const weatherData = {
            current: {
                temp: 26,
                description: "Soleggiato",
                humidity: 45,
                wind: 10
            },
            forecast: [
                { day: "Oggi", temp: 26, icon: "sun" },
                { day: "Dom", temp: 28, icon: "sun" },
                { day: "Lun", temp: 25, icon: "cloud-sun" },
                { day: "Mar", temp: 24, icon: "cloud" },
                { day: "Mer", temp: 23, icon: "cloud-rain" }
            ]
        };

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set default city
            const cityName = localStorage.getItem('cityName') || 'Il Tuo Comune';
            document.getElementById('cityName').textContent = cityName;
            if (localStorage.getItem('cityName')) {
                document.getElementById('cityInput').value = localStorage.getItem('cityName');
            }

            // Load featured places (default to all categories)
            loadPlaces();

            // Event listeners
            document.getElementById('settingsBtn').addEventListener('click', openSettingsModal);
            document.getElementById('closeSettingsBtn').addEventListener('click', closeSettingsModal);
            document.getElementById('saveSettingsBtn').addEventListener('click', saveSettings);
            document.getElementById('loadMapBtn').addEventListener('click', loadMap);
            document.getElementById('searchBtn').addEventListener('click', searchPlaces);
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchPlaces();
                }
            });
            document.getElementById('viewAllBtn').addEventListener('click', viewAllPlaces);
            document.getElementById('notificationBtn').addEventListener('click', openNotificationModal);
            document.getElementById('closeNotificationBtn').addEventListener('click', closeNotificationModal);
            document.getElementById('clearNotificationsBtn').addEventListener('click', clearNotifications);
            document.getElementById('closeReviewBtn').addEventListener('click', closeReviewModal);
            document.getElementById('submitReviewBtn').addEventListener('click', submitReview);
            document.getElementById('createItineraryBtn').addEventListener('click', openCreateItineraryModal);
            document.getElementById('closeItineraryBtn').addEventListener('click', closeCreateItineraryModal);
            document.getElementById('generateItineraryBtn').addEventListener('click', generateItinerary);

            // Rating stars
            document.querySelectorAll('.rating-star').forEach(star => {
                star.addEventListener('click', function() {
                    const value = this.dataset.value;
                    document.querySelectorAll('.rating-star').forEach(s => {
                        s.classList.remove('text-yellow-400');
                        s.classList.add('text-gray-400');
                    });
                    for (let i = 1; i <= value; i++) {
                        document.querySelector(`.rating-star[data-value="${i}"]`).classList.remove('text-gray-400');
                        document.querySelector(`.rating-star[data-value="${i}"]`).classList.add('text-yellow-400');
                    }
                });
            });

            // Duration buttons
            document.querySelectorAll('.duration-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.duration-btn').forEach(b => {
                        b.classList.remove('bg-blue-50', 'text-blue-600', 'border-blue-500');
                    });
                    this.classList.add('bg-blue-50', 'text-blue-600', 'border-blue-500');
                });
            });

            // Category buttons
            document.querySelectorAll('.category-card').forEach(card => {
                card.addEventListener('click', function() {
                    const category = this.dataset.category;
                    loadPlaces(category);
                });
            });

            // Tab buttons
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    switchTab(tabName);
                });
            });

            // Navigation buttons
            document.querySelectorAll('.nav-btn').forEach((btn, index) => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.nav-btn').forEach(b => {
                        b.classList.remove('text-blue-600');
                        b.classList.add('text-gray-500');
                    });
                    this.classList.remove('text-gray-500');
                    this.classList.add('text-blue-600');
                    
                    // Handle navigation actions
                    if (index === 0) { // Home
                        switchTab('home');
                    } else if (index === 1) { // Events
                        switchTab('events');
                    } else if (index === 2) { // Map
                        switchTab('home');
                        scrollToMap();
                    } else if (index === 3) { // Profile
                        openSettingsModal();
                    }
                });
            });

            // Range input
            const radiusRange = document.getElementById('radiusRange');
            const radiusValue = document.getElementById('radiusValue');
            radiusRange.addEventListener('input', function() {
                radiusValue.textContent = this.value + ' km';
            });

            // Load events
            loadEvents();

            // Load offers
            loadOffers();

            // Load itineraries
            loadItineraries();

            // Load weather
            loadWeather();
        });

        // Switch between tabs
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected tab content
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('tab-active');
                btn.classList.add('text-gray-600');
            });
            
            document.querySelector(`.tab-btn[data-tab="${tabName}"]`).classList.add('tab-active');
            document.querySelector(`.tab-btn[data-tab="${tabName}"]`).classList.remove('text-gray-600');
        }

        // Load places based on category
        function loadPlaces(category = null) {
            const placesList = document.getElementById('placesList');
            placesList.innerHTML = '';
            
            let displayPlaces = [];
            
            if (category) {
                document.getElementById('featuredTitle').textContent = getCategoryTitle(category);
                displayPlaces = places[category];
            } else {
                document.getElementById('featuredTitle').textContent = 'In evidenza';
                // Get 2 random places from each category
                Object.keys(places).forEach(cat => {
                    const catPlaces = places[cat];
                    if (catPlaces.length > 0) {
                        displayPlaces.push(catPlaces[Math.floor(Math.random() * catPlaces.length)]);
                    }
                });
            }
            
            displayPlaces.forEach(place => {
                const placeCard = createPlaceCard(place);
                placesList.appendChild(placeCard);
            });
        }

        // Create a place card element
        function createPlaceCard(place) {
            const div = document.createElement('div');
            div.className = 'place-card bg-white rounded-lg shadow-md overflow-hidden transition duration-300';
            div.dataset.id = place.id;
            
            // Generate SVG icon based on category
            let iconSvg = '';
            switch(place.image) {
                case 'restaurant':
                case 'pizza':
                case 'sushi':
                    iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                    </svg>`;
                    break;
                case 'clothing':
                case 'books':
                case 'grocery':
                    iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>`;
                    break;
                case 'pharmacy':
                case 'post':
                case 'bank':
                    iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                    </svg>`;
                    break;
                case 'museum':
                case 'park':
                case 'theater':
                    iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                    </svg>`;
                    break;
            }
            
            // Check if there's an offer for this place
            const hasOffer = offers.some(offer => offer.placeId === place.id);
            const offerBadge = hasOffer ? `<div class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">Offerta</div>` : '';
            
            div.innerHTML = `
                <div class="h-40 bg-gray-100 flex items-center justify-center relative">
                    ${iconSvg}
                    ${offerBadge}
                </div>
                <div class="p-4">
                    <div class="flex justify-between items-start">
                        <h3 class="text-lg font-semibold text-gray-800">${place.name}</h3>
                        <div class="flex items-center bg-blue-50 px-2 py-1 rounded-md">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81```